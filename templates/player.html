<!DOCTYPE html><!--  This site was created in Webflow. http://www.webflow.com  -->
<!--  Last Published: Wed Nov 18 2020 22:41:34 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="5fb581328de81c52444d683d" data-wf-site="5fb581328de81c232b4d683c">
<head>
  <meta charset="utf-8">
  <title>MainPage</title>
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link rel="stylesheet" href="{{ url_for('static', filename='normalize.css') }}" type="text/css">
  <link rel="stylesheet" href="{{ url_for('static', filename='webflow.css') }}" type="text/css">
  <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}" type="text/css">
  <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link href="images/webclip.png" rel="apple-touch-icon">
</head>
<body class="body">
  <div data-collapse="medium" data-animation="default" data-duration="400" role="banner" class="navbar w-nav">
    <div class="w-container">
      <a href="{{ url_for('static', filename='profile.png')}}" class="brand w-nav-brand"></a>
      <nav role="navigation" class="w-nav-menu">
        <a href="#" class="w-nav-link"></a>
        <a href=# id="shutdown" class="w-nav-link"></a>
      </nav>
      <div class="w-nav-button">
        <div class="w-icon-nav-menu"></div>
      </div>
    </div>
  </div>
  <p href=# id=spl></p>
  <div class="columns w-row">
    <div href="#" id="player" class="column w-col w-col-3" value="pause"><img href=# src="{{ url_for('static', filename='Play.png') }}" loading="lazy" width="269" id="album-artwork" alt="" class="button">
      <p href=# id=progress></p>
      <h3 class="heading-2">Queue</h3>
      <ol id="queue" role="list" class="w-list-unstyled">
        <li href=# id="queue1" style="color:white;"></li>
        <li href=# id="queue2"></li>
        <li href=# id="queue3"></li>
        <li href=# id="queue4"></li>
      </ol>
    </div>
    <div id="survey" class="w-col w-col-9">
      <div class="w-form">
        <form href=# id="survey-form" name="email-form" data-name="Email Form" method="POST" onsubmit=''>
          <h1 class="heading">Playlist Generator</h1><label for="name" id="restaurant-label" class="field-label">What Best Describes your Restaurant's mood?</label>
          <div class="w-row">
            <div class="w-col w-col-6"><label id="restaurant-choices" class="radio-button-field w-radio">
                <div class="w-form-formradioinput w-form-formradioinput--inputType-custom w-radio-input"></div><input type="radio" data-name="Genre" id="Genre" name="Genre" value="aggressive" required="" style="opacity:0;position:absolute;z-index:-1"><span for="Genre-4" class="w-form-label">intense, aggressive, visceral</span>
              </label><label id="restaurant-choices" class="radio-button-field w-radio">
                <div class="w-form-formradioinput w-form-formradioinput--inputType-custom w-radio-input"></div><input type="radio" data-name="Genre 2" id="Genre-2" name="Genre" value="bittersweet" required="" style="opacity:0;position:absolute;z-index:-1"><span for="Genre" class="w-form-label">bittersweet, poignant, brooding</span>
              </label><label id="restaurant-choices" class="radio-button-field w-radio">
                <div class="w-form-formradioinput w-form-formradioinput--inputType-custom w-radio-input"></div><input type="radio" data-name="Genre 3" id="Genre-3" name="Genre" value="cheerful" required="" style="opacity:0;position:absolute;z-index:-1"><span for="Genre-2" class="w-form-label">cheerful, fun, good natured</span>
              </label><label id="restaurant-choices" class="radio-button-field w-radio">
                <div class="w-form-formradioinput w-form-formradioinput--inputType-custom w-radio-input"></div><input type="radio" data-name="Genre 4" id="Genre-4" name="Genre" value="humorous" required="" style="opacity:0;position:absolute;z-index:-1"><span for="Genre-3" class="w-form-label">whimsical, humorous, witty</span>
              </label></div>
            <div class="w-col w-col-6"><label id="restaurant-choices" class="radio-button-field w-radio">
                <div class="w-form-formradioinput w-form-formradioinput--inputType-custom w-radio-input"></div><input type="radio" data-name="Genre 5" id="Genre-5" name="Genre" value="passionate" required="" style="opacity:0;position:absolute;z-index:-1"><span for="Genre-5" class="w-form-label">rousing, confident, boisterous</span>
              </label><label id="restaurant-choices" class="radio-button-field w-radio">
                <div class="w-form-formradioinput w-form-formradioinput--inputType-custom w-radio-input"></div><input type="radio" data-name="Genre 6" id="Genre-6" name="Genre" value="all" required="" style="opacity:0;position:absolute;z-index:-1"><span for="Genre-6" class="w-form-label">a bit of everything</span>
              </label><label id="restaurant-choices" class="radio-button-field w-radio">
              </label></div>
          </div><label for="email" id="genre-label" class="field-label-2">What is your Preferred Genre(s)?</label>
          <div class="w-row">
            <div class="w-col w-col-6">
              <label id="genre-selector" class="w-checkbox"><input type="checkbox" id="checkbox-7" name="classical" data-name="Checkbox 7" class="w-checkbox-input checkbox"><span class="checkbox-label w-form-label">Classical</span></label>
              <label id="genre-selector" class="w-checkbox"><input type="checkbox" id="checkbox-6" name="pop" data-name="Checkbox 6" class="w-checkbox-input checkbox"><span class="checkbox-label w-form-label">Pop</span></label>
              <label id="genre-selector" class="w-checkbox"><input type="checkbox" id="checkbox-8" name="rock" data-name="Checkbox 8" class="w-checkbox-input checkbox"><span class="checkbox-label w-form-label">Rock</span></label>
              <label id="genre-selector" class="w-checkbox"><input type="checkbox" id="checkbox" name="hiphop" data-name="Checkbox" class="w-checkbox-input checkbox"><span class="checkbox-label w-form-label">Hip Hop</span></label></div>
            <div class="w-col w-col-6">
              <label id="genre-selector" class="w-checkbox"><input type="checkbox" id="checkbox-3" name="rhythmic" data-name="Checkbox 3" class="w-checkbox-input checkbox"><span class="checkbox-label w-form-label">R&amp;B</span></label>
              <label id="genre-selector" class="w-checkbox"><input type="checkbox" id="checkbox-2" name="jazz" data-name="Checkbox 2" class="w-checkbox-input checkbox"><span class="checkbox-label w-form-label">Jazz</span></label>
              <label id="genre-selector" class="w-checkbox"><input type="checkbox" id="checkbox-4" name="dance" data-name="Checkbox 4" class="w-checkbox-input checkbox"><span class="checkbox-label w-form-label">EDM</span></label></div>
          </div><label for="name" id="restaurant-label" class="field-label">Instrumental or Lyrical?</label>
          <div class="w-row">
            <div class="w-col w-col-4"><label id="instrumental" class="radio-button-field w-radio"><input type="radio" data-name="instrumental" id="instrumental" name="instrumental" value="instrumental" required="" class="w-form-formradioinput w-radio-input"><span for="instrumental" class="w-form-label">Instrumental</span></label></div>
            <div class="w-col w-col-4"><label id="instrumental" class="radio-button-field w-radio"><input type="radio" data-name="Instrumental 2" id="instrumental-2" name="instrumental" value="voice" required="" class="w-form-formradioinput w-radio-input"><span for="instrumental-2" class="radio-button-label w-form-label">Lyrical</span></label></div>
            <div class="w-col w-col-4"><label id="instrumental" class="radio-button-field w-radio"><input type="radio" data-name="Instrumental 3" id="instrumental-3" name="instrumental" value="instrumVoice" required="" class="w-form-formradioinput w-radio-input"><span for="instrumental-3" class="w-form-label">No Preference</span></label></div>
          </div><label for="name" id="restaurant-label" class="field-label">How long do customers stay on average?</label>
          <div class="w-row">
            <div class="w-col w-col-4"><label class="w-radio"><input type="radio" data-name="Radio 3" id="radio-3" name="radio" value="fast" class="w-form-formradioinput w-radio-input"><span class="radio-button-label-2 w-form-label">&lt; 1 hour</span></label></div>
            <div class="w-col w-col-4"><label class="w-radio"><input type="radio" data-name="Radio 3" id="radio-3" name="radio" value="slow" class="w-form-formradioinput w-radio-input"><span class="radio-button-label-2 w-form-label">&gt; 1 hour</span></label></div>
            <div class="column-2 w-col w-col-4"><label class="w-radio"><input type="radio" data-name="Radio 3" id="radio-3" name="radio" value="fastSlow" class="w-form-formradioinput w-radio-input"><span class="w-form-label">Varied</span></label></div>
          </div><label for="name" id="restaurant-label" class="field-label">Danceable?</label>
          <div class="w-row">
            <div class="w-col w-col-6"><label class="radio-button-field-4 w-radio"><input type="radio" data-name="danceability" id="radio-4" name="danceability" value= "not_dance" class="w-form-formradioinput w-radio-input"><span class="w-form-label">Cool, Calm, and Collected</span></label></div>
            <div class="w-col w-col-6"><label class="radio-button-field-4 w-radio"><input type="radio" data-name="danceability" id="radio-4" name="danceability" value="dance" class="w-form-formradioinput w-radio-input"><span class="w-form-label">Toe Tappin&#x27;</span></label></div>
          </div><label for="name" id="restaurant-label" class="field-label">What describes your restauarant's atmosphere?</label>
          <div class="w-row">
            <div class="w-col w-col-6"><label class="w-radio"><input type="radio" data-name="Radio 5" id="radio-5" name="radio-5" value="bright" class="w-form-formradioinput w-radio-input"><span class="radio-button-label w-form-label">Bright</span></label></div>
            <div class="w-col w-col-6"><label class="w-radio"><input type="radio" data-name="Radio 5" id="radio-5" name="radio-5" value="dark" class="w-form-formradioinput w-radio-input"><span class="radio-button-label w-form-label">Dark</span></label></div>
          </div><label for="name" id="restaurant-label" class="field-label">Would it be okay if we used your microphone to get volume information to update the playlist?<br>*No information or audio is recorded or stored</label> 
            <div class="w-row">
              <div class="w-col w-col-6"><label class="w-radio"><input type="radio" data-name="Radio 6" id="radio-5" name="radio-6" value="spl" class="w-form-formradioinput w-radio-input"><span class="radio-button-label w-form-label">Yes, make my playlist awesome!</span></label></div>
              <div class="w-col w-col-6"><label class="w-radio"><input type="radio" data-name="Radio 6" id="radio-5" name="radio-6" value="random" class="w-form-formradioinput w-radio-input"><span class="radio-button-label w-form-label">No, randomize it!</span></label></div> 
              <div class="w-col w-col-6"><label class="w-radio"><input type="radio" data-name="Radio 6" id="radio-5" name="radio-6" value="similarity" class="w-form-formradioinput w-radio-input"><span class="radio-button-label w-form-label">No, play similar songs!</span></label></div>   
            </div><input href="#" type="submit" value="Submit" data-wait="Please wait..." id="submit-queue" class="submit-button w-button">
        </form>
        <div class="w-form-done">
          <div></div>
        </div>
        <div class="w-form-fail" href=# id=submission>
          <div></div>
        </div>
      </div>
    </div>
  </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=5fb581328de81c232b4d683c" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="{{ url_for('static', filename='webflow.js') }}" type="text/javascript"></script>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
</body>
<script src="https://sdk.scdn.co/spotify-player.js"></script>
  <script> window.onSpotifyWebPlaybackSDKReady = () => {
    // var token = "BQCCx9lpjrViiy5JiP7_pEwGsNAUOjAet9ADCdDN6cIYgFLYpJZiSuPuXzyvRKt9LteFgEQCRwpI2QlmdbPsTe4JrV6jYA8koZRYbYzBdVQTDyrTi9HiTXQXHMPGV3DIH7BKgVi1NpJ-rd-oTuILcMWcw4Cy2drBRqzDrZ7fuapXkDUIEVNIjdw";
    const accessToken = '{{token.userToken}}';
    var player = new Spotify.Player({
      name: 'Spotify Player',
      getOAuthToken: cb => { cb(accessToken); }
    });

    // Error handling
    player.addListener('initialization_error', ({ message }) => { console.error(message); });
    player.addListener('authentication_error', ({ message }) => { console.error(message); });
    player.addListener('account_error', ({ message }) => { console.error(message); });
    player.addListener('playback_error', ({ message }) => { console.error(message); });

    // Playback status updates
    player.addListener('player_state_changed', state => { console.log(state); });

    // Ready
    player.addListener('ready', ({ device_id }) => {
      console.log('Ready with Device ID', device_id);
      $.getJSON('/initPlayer',
          function() {
        //do nothing
      });
      var deviceID = device_id
    });

    // Not Ready
    player.addListener('not_ready', ({ device_id }) => {
      console.log('Device ID has gone offline', device_id);
    });

    // Connect to the player!
    player.connect();
  };</script>

<script type=text/javascript>

$(function(){
	$('#submit-queue').click(function(){
		$.ajax({
			url: '/player/',
			data: $('#survey-form').serialize(),
			type: 'POST',
			success: function(response){
        console.log(response);
        $("#submission").text(response);
        
			},
			error: function(error){
        console.log(error);
        $("#submission").text(response);
			}
		});
	});
});


$(function() {
    $('#player').bind('click', function() {
      state = $("#player").attr("value"); 
    if(state === "play")
    {
        $("#player").attr("value", "pause");
        $.getJSON('/pausePlayback',
          function() {
      });
      $("#album-artwork").attr('src', "{{ url_for('static', filename='Play.png') }}")
    }
    else if(state  === "pause")
    {
        $("#player").attr("value", "play");
        $.getJSON('/startPlayback',
          function(data) {
          $("#album-artwork").attr('src', data.art)
      });
    }
  return false;
})
});

// $(function() {
//     $('#shutdown').bind('click', function() {
//       $.getJSON('/shutdown',
//           function() {
//         //do nothing
//       });
//   return false;
// });
// });

setInterval("my_function();",4000); 
function my_function() {
  $(function() {
        $.getJSON('/updateElements',
          function(data) {
          $("#queue1").text(data.song1);
          $("#queue2").text(data.song2);
          $("#queue3").text(data.song3);
          $("#queue4").text(data.song4);
          $("#spl").text(data.spl)
          $("#album-artwork").attr('src', data.art)
          $("#progress").text(data.progress + ' / ' + data.duration + '')
        });
        return false;
      });
    };

$(function() {
    $('#player').bind('click', function() {
      $.getJSON('/playPause',
          function() {
        //do nothing
      });
  return false;
});
});
$(function() {
    $('a#addQueue').bind('click', function() {
      $.getJSON('/addQueue',
          function() {
        //do nothing
      });
  return false;
});
});
$(function() {
    $('a#nextTrack').bind('click', function() {
      $.getJSON('/nextTrack',
          function() {
        //do nothing
      });
  return false;
});
});
</script>
</html>